let q={};export let subscribe=(e,s)=>(q[e]||=new Set).add(s),unsubscribe=(e,s)=>{1==arguments.length?delete q[e]:q[e]?.remove?.(s)},publish=(e,s)=>setTimeout((()=>send(e,s)),0);function send(e,s,r=e,b=!1){for(let t of q[r]||[])try{b=t(e,s,r)||b}catch(e){console.log(e)}"stopPropagation"!=b&&r&&send(e,s,r.replace(/(^|\.)[^.]+$/,""))}