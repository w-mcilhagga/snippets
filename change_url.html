<head>
</head>
<body>
<div id=click>click</div>
</body>
<script>
document.getElementById('click').onclick = 
	function() {
		const url = new URL(window.location);
		url.searchParams.set('query', 'bar');
		//window.history.pushState({}, '', url);
		window.history.pushState({query:'bar'}, '', url)
	}

window.onpopstate = function(evt) { console.log(evt.state) }
</script>